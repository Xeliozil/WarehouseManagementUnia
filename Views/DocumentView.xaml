<UserControl x:Class="WarehouseManagementUnia.Views.DocumentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Document Type and Warehouse -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
            <ComboBox ItemsSource="{Binding DocumentTypes}" SelectedItem="{Binding SelectedDocumentType}"
                      DisplayMemberPath="TypeName" Width="150" Margin="0,0,10,0">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="SelectionChanged">
                        <i:InvokeCommandAction Command="{Binding DocumentTypeChangedCommand}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </ComboBox>
            <ComboBox ItemsSource="{Binding Warehouses}" SelectedItem="{Binding SourceWarehouse}"
                      DisplayMemberPath="WarehouseCode" Width="150" Margin="0,0,10,0" IsEnabled="{Binding IsSourceWarehouseEditable}"/>
            <ComboBox ItemsSource="{Binding AvailableTargetWarehouses}" SelectedItem="{Binding TargetWarehouse}"
                      DisplayMemberPath="WarehouseCode" Width="150" Margin="0,0,10,0" Visibility="{Binding IsTargetWarehouseVisible, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <ComboBox ItemsSource="{Binding Contractors}" SelectedItem="{Binding SelectedContractor}"
                      DisplayMemberPath="Name" Width="200" Visibility="{Binding IsContractorVisible, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        </StackPanel>

        <!-- Products Selection -->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                <ComboBox ItemsSource="{Binding AvailableProducts}" SelectedItem="{Binding SelectedProductForAdd}"
                          DisplayMemberPath="Name" Width="200" Margin="0,0,10,0"/>
                <Button Content="+" Width="30" Command="{Binding AddProductCommand}" Margin="0,0,5,0"/>
                <Button Content="−" Width="30" Command="{Binding RemoveProductCommand}" Margin="0,0,5,0"/>
                <Button Content="Add New Product" Width="120" Command="{Binding AddNewProductCommand}"
                        Visibility="{Binding IsDeliveryDocument, Converter={StaticResource BooleanToVisibilityConverter}}" Margin="0,0,5,0"/>
            </StackPanel>
            <DataGrid Grid.Row="1" ItemsSource="{Binding SelectedProducts}" AutoGenerateColumns="False" IsReadOnly="False">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Product" Binding="{Binding Product.Name}" Width="*" IsReadOnly="True"/>
                    <DataGridTextColumn Header="Quantity" Binding="{Binding Quantity, UpdateSourceTrigger=PropertyChanged}" Width="100"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

        <!-- Report Options and Generate -->
        <StackPanel Grid.Row="2" Margin="0,10,0,0">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <CheckBox Content="Include Document Type" IsChecked="{Binding IncludeDocumentType}" Margin="0,0,10,0"/>
                <CheckBox Content="Include Name" IsChecked="{Binding IncludeName}" Margin="0,0,10,0"/>
                <CheckBox Content="Include Quantity" IsChecked="{Binding IncludeQuantity}" Margin="0,0,10,0"/>
                <CheckBox Content="Include Price" IsChecked="{Binding IncludePrice}" Margin="0,0,10,0"/>
                <CheckBox Content="Include Contractor" IsChecked="{Binding IncludeContractor}" Margin="0,0,10,0"/>
                <CheckBox Content="Include Warehouse" IsChecked="{Binding IncludeWarehouse}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Generate PDF" Command="{Binding GeneratePdfCommand}" Margin="0,0,10,0"/>
                <Button Content="Generate CSV" Command="{Binding GenerateCsvCommand}"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</UserControl>